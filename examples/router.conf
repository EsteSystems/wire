# wire router configuration
# Multi-homed router with multiple network segments

# =============================================================================
# WAN Interface (Internet-facing)
# =============================================================================

interface eth0 set state up
interface eth0 address 203.0.113.2/30
interface eth0 set mtu 1500

# Default route to upstream provider
route default via 203.0.113.1

# =============================================================================
# LAN Segments
# =============================================================================

# LAN 1 - Office network
interface eth1 set state up
interface eth1 address 10.1.0.1/24

# LAN 2 - Server network
interface eth2 set state up
interface eth2 address 10.2.0.1/24

# LAN 3 - Guest network (isolated)
interface eth3 set state up
interface eth3 address 10.3.0.1/24

# =============================================================================
# Inter-VLAN Routing (Router-on-a-stick)
# =============================================================================

# Trunk port to managed switch
interface eth4 set state up

# Department VLANs
vlan 10 on eth4
interface eth4.10 set state up
interface eth4.10 address 10.10.0.1/24

vlan 20 on eth4
interface eth4.20 set state up
interface eth4.20 address 10.20.0.1/24

vlan 30 on eth4
interface eth4.30 set state up
interface eth4.30 address 10.30.0.1/24

# =============================================================================
# High Availability - Bonded Uplink
# =============================================================================

# Dual uplinks to core switch (802.3ad LACP = mode 4)
bond bond0 create mode 4
bond bond0 add eth5
bond bond0 add eth6
interface bond0 set state up
interface bond0 address 10.254.0.1/30

# Route to datacenter via bonded uplink
route 10.100.0.0/16 via 10.254.0.2
route 10.200.0.0/16 via 10.254.0.2
