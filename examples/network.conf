# wire network configuration example
# /etc/wire/network.conf
#
# This file uses the same syntax as wire CLI commands.
# One statement per line, comments start with #

# =============================================================================
# Basic Interface Configuration
# =============================================================================

# Bring up loopback
interface lo set state up

# Configure primary interface with address and MTU
interface eth0 set state up
interface eth0 set mtu 1500
interface eth0 address 10.0.0.10/24

# Secondary address on same interface
interface eth0 address 10.0.0.11/24

# =============================================================================
# Bonding (Link Aggregation)
# =============================================================================

# Create bond with 802.3ad (LACP) mode
# Use mode "4" for 802.3ad LACP
bond bond0 create mode 4

# Add member interfaces
bond bond0 add eth1
bond bond0 add eth2

# Configure the bond interface
interface bond0 set state up
interface bond0 address 10.0.1.1/24

# =============================================================================
# VLANs
# =============================================================================

# Create VLAN 100 on bond0 for management traffic
vlan 100 on bond0
interface bond0.100 set state up
interface bond0.100 address 10.100.0.1/24

# Create VLAN 200 on bond0 for production traffic
vlan 200 on bond0
interface bond0.200 set state up
interface bond0.200 address 10.200.0.1/24

# =============================================================================
# Bridges
# =============================================================================

# Create bridge for virtual machines
bridge br-vms create

# Add physical port to bridge
bridge br-vms add eth3

# Configure bridge interface
interface br-vms set state up
interface br-vms address 192.168.100.1/24

# =============================================================================
# Routing
# =============================================================================

# Default gateway
route default via 10.0.0.1

# Static routes to remote networks
route 172.16.0.0/12 via 10.0.1.254
route 192.168.0.0/16 via 10.0.1.254

# Route via specific interface (for directly connected)
route 10.10.0.0/24 dev bond0.100
